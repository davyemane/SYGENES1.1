<!DOCTYPE html>
<html lang="{{app.request.locale}}">
<head>
    <meta charset="UTF-8">
    <title>Relevé de Notes - {{ student.firstName }} {{ student.lastName }}</title>
</head>
<body style="font-family: Arial, sans-serif; font-size: 12px; line-height: 1.6; margin: 0; padding: 20px;">
    <div style="text-align: center; margin-bottom: 20px;">
        <h1 style="font-size: 18px; margin-bottom: 5px;">RELEVE DE NOTES</h1>
        <p style="margin: 0;">REPUBLIQUE DU CAMEROUN - REPUBLIC OF CAMEROON</p>
        <p style="margin: 0;">MINISTERE DE L'ENSEIGNEMENT SUPERIEUR - MINISTRY OF HIGHER EDUCATION</p>
        <p style="margin: 0;">UNIVERSITE INTER-ETATS CONGO-CAMEROUN À SANGMELIMA</p>
        <p style="margin: 0;">CONGO-CAMEROON INTER-STATES UNIVERSITY AT SANGMELIMA</p>
    </div>

    <table style="width: 100%; margin-bottom: 20px;">
        <tr>
            <td style="width: 50%;">
                <p><strong>Noms et Prénoms:</strong> {{ student.lastName }} {{ student.firstName }}</p>
                <p><strong>Né(e) le:</strong> {{ student.dateOfBirth|date('d/m/Y') }}</p>
                <p><strong>Sexe:</strong> {{ student.gender }}</p>
                <p><strong>Niveau:</strong> {{ student.level }}</p>
            </td>
            <td style="width: 50%;">
                <p><strong>Matricule:</strong> {{ student.studentID }}</p>
                <p><strong>Spécialité:</strong> {{ student.speciality }}</p>
                <p><strong>Année académique:</strong> {{ academic_year }}</p>
            </td>
        </tr>
    </table>

    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #f2f2f2;">
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">CODES</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">INTITULES</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: center;">GRADES</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: center;">CREDITS VALIDES</th>
                <th style="border: 1px solid #ddd; padding: 8px; text-align: center;">SESSION DE VALIDATION</th>
            </tr>
        </thead>
        <tbody>
            {% for ue in ues %}
                <tr>
                    <td colspan="5" style="border: 1px solid #ddd; padding: 8px; font-weight: bold;">{{ ue.code }} - {{ ue.name }}</td>
                </tr>
                {% for note in notes %}
                    {% if note.ec.ue.id == ue.id %}
                        <tr>
                            <td style="border: 1px solid #ddd; padding: 8px;">{{ note.ec.code }}</td>
                            <td style="border: 1px solid #ddd; padding: 8px;">{{ note.ec.name }}</td>
                            <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">{{ grades[note.id] }}</td>
                            <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">{{ note.finalGrade >= 10 ? note.ec.credit : '' }}</td>
                            <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">{{ note.session }}</td>
                        </tr>
                    {% endif %}
                {% endfor %}
            {% endfor %}
        </tbody>
    </table>

    <div style="margin-top: 20px;">
        <p><strong>Crédits validés:</strong> {{ total_credits_valides }}/60</p>
        <p><strong>Crédits restants à valider:</strong> {{ credits_restants }}</p>
        <p><strong>MPC:</strong> {{ mpc }}</p>
    </div>

    <div style="margin-top: 40px; text-align: right;">
        <p>Fait à Sangmelima, le {{ "now"|date("d/m/Y") }}</p>
        <p>Le Secrétaire Académique</p>
        <div style="margin-top: 60px;">
            <p><strong>Jacques Atangana</strong></p>
            <p>Ph.D - Génie Electrique</p>
            <p>PROFESSEUR</p>
        </div>
    </div>
</body>
</html>